<!-- 
// function loadScriptViaCallback (src, callback) {
//   const script = document.createElement('script')
//   script.src = src

//   script.onload = () => callback(script)
// onload event occurs when an onject has been loaded.
//   document.head.append(script)
// }

// loadScriptViaCallback('/my/script.js', function () {
//   // the callback runs after the script is loaded
//   newFunction() // so now it works
// }) -->
<script>
  // function loadScript (src) {
  //   // creates a <script> tag and append it to the page
  //   // this causes the script with given src to start loading and run when complete
  //   const script = document.createElement('script')
  //   script.src = src
  //   document.head.append(script)
  // }
  // loadScript('https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.2.0/lodash.js') // the script has "function _ () {â€¦}"
  // alert(_)

  // newFunction() // no such function!

  function loadScript (src, callback) {
    const script = document.createElement('script')
    script.src = src
    script.onload = () => callback(null, script);
    script.onerror = () => callback(new Error(`Script load error for ${src}`));
    document.head.append(script)
  }

  loadScript('https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.2.0/lodash.js', function(error, script) {
    if (error) {
      // handle error
      console.log(error)
    } else {
      // script loaded successfully
      alert(`Cool, the script ${script.src} is loaded`)
      alert(_) // function declared in the loaded script
    }
  })
  
</script>
